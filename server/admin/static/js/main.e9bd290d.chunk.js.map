{"version":3,"sources":["request/index.js","request/request.js","pages/Login.jsx","pages/AddArticle.jsx","pages/ArticleList.jsx","pages/Main.jsx","App.jsx","index.js"],"names":["request","config","instance","axios","create","baseURL","timeout","interceptors","use","token","sessionStorage","getItem","headers","Authorization","err","response","res","data","addArticle","url","method","deleteArticle","id","getArticleTypes","Login","props","useState","username","setUsername","password","setPassword","isLogin","setIsLogin","loginClick","a","message","error","success","setItem","history","push","className","title","bordered","style","width","size","placeholder","prefix","UserOutlined","value","onChange","e","target","Password","UnlockOutlined","direction","type","onClick","loading","block","Option","TextArea","AddArticle","marked","setOptions","renderer","Renderer","gfm","pedantic","sanitize","tables","breaks","smartLists","smartypants","highlight","code","hljs","highlightAuto","isAddArtice","setIsAddArtice","articleContentMD","setArticleContentMD","articleContentHTML","setArticleContentHTML","introduceMD","setIntroduceMD","introduceHTML","setIntroduceHTML","setType","useForm","addArticleForm","useEffect","match","params","then","split","time","moment","console","log","setFieldsValue","content","introduce","submitArticle","values","join","format","layout","onFinish","form","padding","span","gutter","Item","name","label","rules","required","minWidth","mode","map","item","key","typeName","rows","paddingBottom","dangerouslySetInnerHTML","__html","marginBottom","showTime","margin","htmlType","ArticleList","typeList","setTypeList","articleList","setArticleList","columns","dataIndex","render","text","record","cancelText","okText","onConfirm","handleDeleteArticle","getTypeList","getArticleList","filter","Number","includes","dataSource","Content","Footer","Sider","SubMenu","Main","collapsed","setCollapsed","currentPath","setCurrentPath","selectedKey","setSelectedKey","location","pathname","minHeight","collapsible","onCollapse","theme","selectedKeys","defaultSelectedKeys","defaultOpenKeys","icon","PieChartOutlined","AppstoreOutlined","FileAddOutlined","UnorderedListOutlined","CopyOutlined","display","indexOf","EditOutlined","CommentOutlined","path","exact","component","textAlign","App","to","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.e9bd290d.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nexport function request(config) {\r\n  const instance = axios.create({\r\n    baseURL: 'http://localhost:8989/blog/admin',\r\n    // baseURL:\r\n    //   process.env.NODE_ENV === 'production'\r\n    //     ? ''\r\n    //     : 'http://localhost:8989/blog/admin',\r\n    timeout: 5000,\r\n  })\r\n  instance.interceptors.request.use(\r\n    config => {\r\n      const token = sessionStorage.getItem('token')\r\n      if (token) config.headers.Authorization = 'Bearer ' + token\r\n      return config\r\n    },\r\n    err => {}\r\n  )\r\n  instance.interceptors.response.use(\r\n    res => {\r\n      return res.data\r\n    },\r\n    err => {}\r\n  )\r\n\r\n  return instance(config)\r\n}\r\n","import { request } from './index'\r\n\r\n// 登录\r\nexport function login(data) {\r\n  return request({\r\n    url: '/login',\r\n    method: 'post',\r\n    data,\r\n  })\r\n}\r\n\r\n// 获取所有文章\r\nexport function getArticles() {\r\n  return request({\r\n    url: '/articles',\r\n  })\r\n}\r\n\r\n// 通过id获取文章\r\nexport function getArticleById(id) {\r\n  return request({\r\n    url: `/article/${id}`,\r\n  })\r\n}\r\n\r\n// 通过分类获取文章\r\nexport function getArticlesByType(typeId) {\r\n  return request({\r\n    url: `/articles/${typeId}`,\r\n  })\r\n}\r\n\r\n// 添加文章\r\nexport function addArticle(data) {\r\n  return request({\r\n    url: '/article',\r\n    method: 'post',\r\n    data,\r\n  })\r\n}\r\n\r\n// 修改文章\r\nexport function updateArticle(id, data) {\r\n  return request({\r\n    url: `/article/${id}`,\r\n    method: 'put',\r\n    data,\r\n  })\r\n}\r\n\r\n// 删除文章\r\nexport function deleteArticle(id) {\r\n  return request({\r\n    url: `/article/${id}`,\r\n    method: 'delete',\r\n  })\r\n}\r\n\r\n// 获取所有分类\r\nexport function getArticleTypes() {\r\n  return request({\r\n    url: 'article_type',\r\n  })\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nimport { Card, Input, Button, Space, message } from 'antd'\r\nimport { UserOutlined, UnlockOutlined } from '@ant-design/icons'\r\n\r\nimport '../static/css/login.css'\r\n\r\nimport { login } from '../request/request'\r\n\r\nconst Login = props => {\r\n  const [username, setUsername] = useState('test')\r\n  const [password, setPassword] = useState(123456)\r\n  const [isLogin, setIsLogin] = useState(false)\r\n\r\n  const loginClick = async () => {\r\n    setIsLogin(true)\r\n    const res = await login({\r\n      username,\r\n      password,\r\n    })\r\n    if (!res) return message.error('用户名或密码错误')\r\n    message.success('登录成功')\r\n    sessionStorage.setItem('token', res.token)\r\n\r\n    setIsLogin(false)\r\n    props.history.push('/main')\r\n  }\r\n\r\n  const reset = () => {\r\n    setUsername('')\r\n    setPassword('')\r\n  }\r\n\r\n  return (\r\n    <div className='login-form'>\r\n      <Card title='博客后台管理系统' bordered style={{ width: 400 }}>\r\n        <Input\r\n          size='large'\r\n          placeholder='Enter your username'\r\n          prefix={<UserOutlined />}\r\n          value={username}\r\n          onChange={e => setUsername(e.target.value)}\r\n        />\r\n        <br />\r\n        <br />\r\n        <Input.Password\r\n          size='large'\r\n          placeholder='Enter your password'\r\n          prefix={<UnlockOutlined />}\r\n          value={password}\r\n          onChange={e => setPassword(e.target.value)}\r\n        />\r\n        <br />\r\n        <br />\r\n        <Space direction='vertical' style={{ width: '100%' }}>\r\n          <Button type='primary' onClick={loginClick} loading={isLogin} block>\r\n            登录\r\n          </Button>\r\n          <Button onClick={reset} block>\r\n            重置\r\n          </Button>\r\n        </Space>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login\r\n","import React, { useState, useEffect } from 'react'\r\n\r\nimport moment from 'moment'\r\n\r\n// 网络请求\r\nimport {\r\n  getArticleTypes,\r\n  getArticleById,\r\n  addArticle,\r\n  updateArticle,\r\n} from '../request/request'\r\n// 样式\r\nimport '../static/css/addArticle.css'\r\n\r\nimport marked from 'marked'\r\nimport hljs from 'highlight.js'\r\nimport 'highlight.js/styles/monokai-sublime.css'\r\n\r\nimport {\r\n  Row,\r\n  Col,\r\n  Input,\r\n  Select,\r\n  Button,\r\n  DatePicker,\r\n  Form,\r\n  message,\r\n} from 'antd'\r\nconst { Option } = Select\r\nconst { TextArea } = Input\r\n\r\nconst AddArticle = props => {\r\n  marked.setOptions({\r\n    renderer: new marked.Renderer(),\r\n    gfm: true,\r\n    pedantic: false,\r\n    sanitize: false,\r\n    tables: true,\r\n    breaks: false,\r\n    smartLists: true,\r\n    smartypants: false,\r\n    highlight(code) {\r\n      return hljs.highlightAuto(code).value\r\n    },\r\n  })\r\n\r\n  const [isAddArtice, setIsAddArtice] = useState(false)\r\n  const [articleContentMD, setArticleContentMD] = useState('') //文章markdown内容\r\n  const [articleContentHTML, setArticleContentHTML] = useState('内容预览') //文章html内容\r\n  const [introduceMD, setIntroduceMD] = useState() //简介的markdown内容\r\n  const [introduceHTML, setIntroduceHTML] = useState('简介预览') //简介的html内容\r\n  const [type, setType] = useState([]) // 文章类别\r\n\r\n  const [addArticleForm] = Form.useForm()\r\n\r\n  useEffect(() => {\r\n    if (props.match.params.id) {\r\n      setIsAddArtice(false)\r\n    } else {\r\n      setIsAddArtice(true)\r\n    }\r\n    // 获取文章分类\r\n    getArticleTypes().then(res => {\r\n      // console.log(res)\r\n      if (res) setType(res)\r\n    })\r\n    // 如果id存在，说明是编辑文章，需要通过id获取文章\r\n    if (props.match.params.id) {\r\n      getArticleById(props.match.params.id).then(res => {\r\n        if (!res) return\r\n        const data = res[0]\r\n        data.type = data.type.split(',')\r\n        data.time = moment(data.time)\r\n        console.log(data)\r\n        addArticleForm.setFieldsValue(data)\r\n        setArticleContentHTML(marked(data.content))\r\n        setIntroduceHTML(marked(data.introduce))\r\n      })\r\n    }\r\n  }, [])\r\n\r\n  // 事件\r\n  const articleContentChange = e => {\r\n    setArticleContentMD(e.target.value)\r\n    setArticleContentHTML(marked(e.target.value))\r\n  }\r\n\r\n  const introduceChange = e => {\r\n    setIntroduceMD(e.target.value)\r\n    setIntroduceHTML(marked(e.target.value))\r\n  }\r\n\r\n  // 发布文章\r\n  const submitArticle = async values => {\r\n    // return console.log(values.type.join())\r\n    if (!isAddArtice) {\r\n      values.type = values.type.join(',')\r\n      values.time = moment(values.time).format('YYYY-MM-DD HH:mm:ss')\r\n      const res = await updateArticle(props.match.params.id, values)\r\n      if (!res) return message.error('文章保存失败')\r\n      message.success('文章保存成功')\r\n      return\r\n    }\r\n    // 处理type字段参数值\r\n    values.type = values.type.join(',')\r\n    values.time = moment(values.time).format('YYYY-MM-DD HH:mm:ss')\r\n    // 发送添加文章请求\r\n    console.log(values)\r\n    const res = await addArticle(values)\r\n    if (!res) return message.error('文章添加失败')\r\n    message.success('文章添加成功')\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Form layout='vertical' onFinish={submitArticle} form={addArticleForm}>\r\n        <Row>\r\n          <Col style={{ padding: 8 }} span={18}>\r\n            <Row gutter={10}>\r\n              <Col span={24}>\r\n                <Form.Item\r\n                  name='title'\r\n                  label='文章标题'\r\n                  rules={[{ required: true, message: '请输入文章标题' }]}\r\n                >\r\n                  <Input size='large' placeholder='输入文章标题' />\r\n                </Form.Item>\r\n              </Col>\r\n              <Col span={24}>\r\n                <Form.Item\r\n                  name='type'\r\n                  label='文章分类'\r\n                  rules={[{ required: true, message: '请选择文章分类' }]}\r\n                >\r\n                  <Select\r\n                    style={{ minWidth: '50%' }}\r\n                    mode='multiple'\r\n                    size='large'\r\n                    placeholder='请选择文章分类'\r\n                  >\r\n                    {type.map(item => (\r\n                      <Option key={item.id}>{item.typeName}</Option>\r\n                    ))}\r\n                  </Select>\r\n                </Form.Item>\r\n              </Col>\r\n            </Row>\r\n            <Row gutter={10}>\r\n              <Col span={12}>\r\n                <Form.Item\r\n                  name='content'\r\n                  label='文章内容'\r\n                  rules={[{ required: true, message: '请输入文章内容' }]}\r\n                >\r\n                  <TextArea\r\n                    className='article-content-md'\r\n                    rows='25'\r\n                    placeholder='文章内容'\r\n                    value={articleContentMD}\r\n                    onChange={articleContentChange}\r\n                  />\r\n                </Form.Item>\r\n              </Col>\r\n              <Col span={12}>\r\n                <div style={{ paddingBottom: '8px' }}>内容预览</div>\r\n                <div\r\n                  className='article-content-html'\r\n                  dangerouslySetInnerHTML={{ __html: articleContentHTML }}\r\n                ></div>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n          <Col style={{ padding: 8 }} span={6}>\r\n            <Row>\r\n              <Col span={24}>\r\n                <Form.Item\r\n                  name='introduce'\r\n                  label='文章简介'\r\n                  rules={[{ required: true, message: '请输入文章简介' }]}\r\n                >\r\n                  <TextArea\r\n                    rows='4'\r\n                    placeholder='文章简介'\r\n                    value={introduceMD}\r\n                    onChange={introduceChange}\r\n                  />\r\n                </Form.Item>\r\n              </Col>\r\n              <Col span={24}>\r\n                <div style={{ paddingBottom: '8px' }}>简介预览</div>\r\n                <div\r\n                  style={{ marginBottom: '24px' }}\r\n                  className='article-intr-html'\r\n                  dangerouslySetInnerHTML={{ __html: introduceHTML }}\r\n                ></div>\r\n              </Col>\r\n              <Col span={24}>\r\n                <Form.Item name='time' label='发布日期'>\r\n                  <DatePicker\r\n                    showTime\r\n                    className='date'\r\n                    placeholder='发布日期'\r\n                    size='large'\r\n                    style={{ width: '100%' }}\r\n                  />\r\n                </Form.Item>\r\n              </Col>\r\n              <Col span={24}>\r\n                <Form.Item>\r\n                  <Button\r\n                    style={{ margin: '0 5px' }}\r\n                    size='large'\r\n                    type='primary'\r\n                    htmlType='submit'\r\n                    block\r\n                  >\r\n                    {isAddArtice ? '添加文章' : '保存文章'}\r\n                  </Button>\r\n                </Form.Item>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AddArticle\r\n","import React, { useState, useEffect, useCallback } from 'react'\r\n\r\nimport moment from 'moment'\r\n\r\nimport { Table, Button, Popconfirm, message } from 'antd'\r\n\r\nimport { getArticles, getArticleTypes, deleteArticle } from '../request/request'\r\n\r\nconst ArticleList = props => {\r\n  const [typeList, setTypeList] = useState([])\r\n  const [articleList, setArticleList] = useState([])\r\n\r\n  const columns = [\r\n    {\r\n      title: '标题',\r\n      dataIndex: 'title',\r\n      key: 'title',\r\n    },\r\n    {\r\n      title: '类别',\r\n      dataIndex: 'type',\r\n      key: 'type',\r\n    },\r\n    {\r\n      title: '发布时间',\r\n      dataIndex: 'time',\r\n      key: 'time',\r\n    },\r\n    {\r\n      title: '访问量',\r\n      dataIndex: 'visits',\r\n      key: 'visits',\r\n    },\r\n    {\r\n      title: '操作',\r\n      dataIndex: 'option',\r\n      key: 'option',\r\n      render: (text, record) => (\r\n        <>\r\n          <Button\r\n            type='primary'\r\n            style={{ margin: '0 10px' }}\r\n            onClick={() => {\r\n              props.history.push(`/main/article_edit/${record.id}`)\r\n            }}\r\n          >\r\n            修改\r\n          </Button>\r\n          <Popconfirm\r\n            title='确认删除该文章?'\r\n            cancelText='取消'\r\n            okText='确认'\r\n            onConfirm={() => handleDeleteArticle(record.id)}\r\n          >\r\n            <Button type='danger'>删除</Button>\r\n          </Popconfirm>\r\n        </>\r\n      ),\r\n    },\r\n  ]\r\n\r\n  useEffect(() => {\r\n    getTypeList()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    getArticleList()\r\n  }, [typeList])\r\n\r\n  // 获取分类列表\r\n  const getTypeList = async () => {\r\n    const res = await getArticleTypes()\r\n    if (!res) return\r\n    setTypeList(res)\r\n  }\r\n\r\n  // 获取文章列表数据\r\n  const getArticleList = async () => {\r\n    const res = await getArticles()\r\n    if (!res) return\r\n    const data = res.map(item => {\r\n      item.key = item.id\r\n      item.time = moment(item.time).format('YYYY-MM-DD HH:mm:ss')\r\n      item.type = typeList\r\n        .filter(type => item.type.split(',').map(Number).includes(type.id))\r\n        .map(type => type.typeName)\r\n        .join('/')\r\n      return item\r\n    })\r\n    setArticleList(data)\r\n  }\r\n\r\n  // 删除文章\r\n  const handleDeleteArticle = async id => {\r\n    const res = await deleteArticle(id)\r\n    if (!res) return message.error('文章删除失败')\r\n    message.success('文章删除成功')\r\n    getArticleList()\r\n  }\r\n\r\n  return <Table bordered columns={columns} dataSource={articleList}></Table>\r\n}\r\n\r\nexport default ArticleList\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Route, Switch } from 'react-router-dom'\r\n\r\n// 引入样式文件\r\nimport '../static/css/main.css'\r\n// 引入自定义组件\r\nimport AddArticle from './AddArticle'\r\nimport ArticleList from './ArticleList'\r\n\r\nimport { Layout, Menu, Breadcrumb } from 'antd'\r\nimport {\r\n  PieChartOutlined,\r\n  CommentOutlined,\r\n  AppstoreOutlined,\r\n  CopyOutlined,\r\n  EditOutlined,\r\n  FileAddOutlined,\r\n  UnorderedListOutlined,\r\n} from '@ant-design/icons'\r\n\r\nconst { Content, Footer, Sider } = Layout\r\nconst { SubMenu } = Menu\r\n\r\nconst Main = props => {\r\n  const [collapsed, setCollapsed] = useState(false)\r\n  const [currentPath, setCurrentPath] = useState('')\r\n  const [selectedKey, setSelectedKey] = useState('')\r\n\r\n  useEffect(() => {\r\n    setSelectedKey(props.location.pathname.split('/')[2])\r\n    if (!sessionStorage.getItem('token')) props.history.push('/login')\r\n    setCurrentPath(props.location.pathname)\r\n  }, [props.location.pathname])\r\n\r\n  // 是否收起菜单\r\n  const onCollapse = () => {\r\n    setCollapsed(!collapsed)\r\n  }\r\n  // 菜单点击事件\r\n  const menuClick = value => {\r\n    switch (value.key) {\r\n      case 'article_add':\r\n        props.history.push('/main/article_add')\r\n        break\r\n      case 'article_list':\r\n        props.history.push('/main/article_list')\r\n        break\r\n      default:\r\n        break\r\n    }\r\n  }\r\n\r\n  const _getBreadText = () => {\r\n    if (currentPath.indexOf('/type') !== -1) return '分类管理'\r\n    if (currentPath.indexOf('/article') !== -1) return '文章管理'\r\n    return ''\r\n  }\r\n\r\n  const getBreadText = () => {\r\n    if (currentPath.indexOf('/type_add') !== -1) return '添加类型'\r\n    if (currentPath.indexOf('/type_add') !== -1) return '编辑类型'\r\n    if (currentPath.indexOf('/type_list') !== -1) return '编辑类型'\r\n    if (currentPath.indexOf('/article_add') !== -1) return '添加文章'\r\n    if (currentPath.indexOf('/article_edit') !== -1) return '编辑文章'\r\n    if (currentPath.indexOf('/article_list') !== -1) return '文章列表'\r\n    return ''\r\n  }\r\n\r\n  return (\r\n    <Layout style={{ minHeight: '100vh' }}>\r\n      <Sider collapsible collapsed={collapsed} onCollapse={onCollapse}>\r\n        <Menu\r\n          onClick={menuClick}\r\n          theme='dark'\r\n          selectedKeys={[selectedKey]}\r\n          defaultSelectedKeys={['article']}\r\n          defaultOpenKeys={['article']}\r\n          mode='inline'\r\n        >\r\n          <Menu.Item key='1' icon={<PieChartOutlined />}>\r\n            工作台\r\n          </Menu.Item>\r\n          <SubMenu key='type' icon={<AppstoreOutlined />} title='分类管理'>\r\n            <Menu.Item key='type_add' icon={<FileAddOutlined />}>\r\n              添加分类\r\n            </Menu.Item>\r\n            <Menu.Item key='type_list' icon={<UnorderedListOutlined />}>\r\n              分类列表\r\n            </Menu.Item>\r\n          </SubMenu>\r\n          <SubMenu key='article' icon={<CopyOutlined />} title='文章管理'>\r\n            <Menu.Item\r\n              key='article_add'\r\n              icon={<FileAddOutlined />}\r\n              style={{\r\n                display:\r\n                  currentPath.indexOf('/article_edit') === -1\r\n                    ? 'block'\r\n                    : 'none',\r\n              }}\r\n            >\r\n              添加文章\r\n            </Menu.Item>\r\n            <Menu.Item\r\n              key='article_edit'\r\n              icon={<EditOutlined />}\r\n              style={{\r\n                display:\r\n                  currentPath.indexOf('/article_edit') === -1\r\n                    ? 'none'\r\n                    : 'block',\r\n              }}\r\n            >\r\n              编辑文章\r\n            </Menu.Item>\r\n            <Menu.Item key='article_list' icon={<UnorderedListOutlined />}>\r\n              文章列表\r\n            </Menu.Item>\r\n          </SubMenu>\r\n          <Menu.Item key='9' icon={<CommentOutlined />}>\r\n            留言管理\r\n          </Menu.Item>\r\n        </Menu>\r\n      </Sider>\r\n      <Layout className='site-layout'>\r\n        <Content style={{ margin: '0 16px' }}>\r\n          <Breadcrumb style={{ margin: '16px 0' }}>\r\n            <Breadcrumb.Item>\r\n              {currentPath.indexOf('/article') !== -1 ? '文章管理' : ''}\r\n            </Breadcrumb.Item>\r\n            <Breadcrumb.Item>{getBreadText()}</Breadcrumb.Item>\r\n          </Breadcrumb>\r\n          <div\r\n            className='site-layout-background'\r\n            style={{ padding: 10, minHeight: 360 }}\r\n          >\r\n            <Switch>\r\n              <Route path='/main/article_add' exact component={AddArticle} />\r\n              <Route\r\n                path='/main/article_edit/:id'\r\n                exact\r\n                component={AddArticle}\r\n              />\r\n              <Route path='/main/article_list' exact component={ArticleList} />\r\n            </Switch>\r\n          </div>\r\n        </Content>\r\n        <Footer style={{ textAlign: 'center' }}>\r\n          Ant Design ©2018 Created by Ant UED\r\n        </Footer>\r\n      </Layout>\r\n    </Layout>\r\n  )\r\n}\r\n\r\nexport default Main\r\n","import React from 'react'\nimport { HashRouter as Router, Route, Redirect } from 'react-router-dom'\n\nimport Login from './pages/Login'\nimport Main from './pages/Main'\n\nconst App = () => {\n  return (\n    <Router>\n      <Route path='/' render={() => <Redirect to='/main/article_add' />} />\n      <Route exact path='/login' component={Login} />\n      <Route path='/main' component={Main} />\n    </Router>\n  )\n}\n\nexport default App\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n"],"sourceRoot":""}